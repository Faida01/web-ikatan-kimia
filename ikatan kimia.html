<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Pembelajaran Ikatan Kimia</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }

        nav {
            background: rgba(255, 255, 255, 0.95);
            padding: 15px 30px;
            border-radius: 15px;
            margin-bottom: 30px;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1);
            display: flex;
            justify-content: space-around;
            flex-wrap: wrap;
            gap: 10px;
        }

        nav button {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            padding: 12px 30px;
            border-radius: 25px;
            cursor: pointer;
            font-size: 16px;
            font-weight: bold;
            transition: all 0.3s;
        }

        nav button:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(102, 126, 234, 0.4);
        }

        nav button.active {
            background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
        }

        .content {
            background: white;
            border-radius: 20px;
            padding: 40px;
            box-shadow: 0 10px 40px rgba(0, 0, 0, 0.2);
            display: none;
        }

        .content.active {
            display: block;
            animation: fadeIn 0.5s;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        h1 {
            color: #667eea;
            margin-bottom: 20px;
            font-size: 2.5em;
        }

        h2 {
            color: #764ba2;
            margin: 25px 0 15px 0;
            font-size: 1.8em;
        }

        h3 {
            color: #667eea;
            margin: 20px 0 10px 0;
        }

        p {
            line-height: 1.8;
            color: #333;
            margin-bottom: 15px;
        }

        .home-content {
            text-align: center;
        }

        .materi-box {
            background: linear-gradient(135deg, #667eea15 0%, #764ba215 100%);
            padding: 20px;
            border-radius: 15px;
            margin: 20px 0;
            border-left: 5px solid #667eea;
        }

        .simulation-container {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin: 30px 0;
        }

        .sim-card {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 30px;
            border-radius: 15px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s;
        }

        .sim-card:hover {
            transform: scale(1.05);
            box-shadow: 0 10px 30px rgba(102, 126, 234, 0.5);
        }

        .sim-card h3 {
            color: white;
            margin-bottom: 15px;
        }

        /* Virtual Lab Styles */
        .virtual-lab {
            background: #1a1a2e;
            border-radius: 20px;
            padding: 30px;
            margin: 30px 0;
            min-height: 500px;
            position: relative;
            overflow: hidden;
        }

        .lab-title {
            color: white;
            text-align: center;
            margin-bottom: 20px;
            font-size: 24px;
        }

        .lab-canvas {
            width: 100%;
            height: 450px;
            background: linear-gradient(180deg, #0f0f1e 0%, #1a1a2e 100%);
            border-radius: 15px;
            position: relative;
            overflow: hidden;
            border: 2px solid #667eea;
        }

        .atom-virtual {
            position: absolute;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            font-size: 20px;
            color: white;
            cursor: grab;
            transition: all 0.3s;
            box-shadow: 0 0 30px currentColor;
        }

        .atom-virtual:active {
            cursor: grabbing;
        }

        .atom-virtual.combining {
            animation: pulse 0.5s ease-in-out;
        }

        @keyframes pulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.2); }
        }

        .electron-shell {
            position: absolute;
            border: 2px dashed rgba(255, 255, 255, 0.3);
            border-radius: 50%;
            animation: rotate 8s linear infinite;
        }

        @keyframes rotate {
            from { transform: rotate(0deg); }
            to { transform: rotate(360deg); }
        }

        .electron-dot {
            position: absolute;
            width: 12px;
            height: 12px;
            background: #f5576c;
            border-radius: 50%;
            box-shadow: 0 0 15px #f5576c;
            animation: glow 1.5s ease-in-out infinite alternate;
        }

        @keyframes glow {
            from { box-shadow: 0 0 10px #f5576c; }
            to { box-shadow: 0 0 25px #f5576c, 0 0 35px #f5576c; }
        }

        .bond-line {
            position: absolute;
            height: 4px;
            background: linear-gradient(90deg, #667eea, #f5576c);
            transform-origin: left center;
            opacity: 0;
            transition: opacity 0.5s;
            box-shadow: 0 0 10px #667eea;
            animation: bondGlow 2s ease-in-out infinite;
        }

        @keyframes bondGlow {
            0%, 100% { box-shadow: 0 0 10px #667eea; }
            50% { box-shadow: 0 0 20px #667eea, 0 0 30px #764ba2; }
        }

        .bond-line.active {
            opacity: 1;
        }

        .control-panel {
            display: flex;
            justify-content: center;
            gap: 15px;
            margin-top: 20px;
            flex-wrap: wrap;
        }

        .control-btn {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            padding: 12px 30px;
            border-radius: 25px;
            cursor: pointer;
            font-size: 16px;
            font-weight: bold;
            transition: all 0.3s;
        }

        .control-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(102, 126, 234, 0.5);
        }

        .control-btn:active {
            transform: translateY(0);
        }

        .info-panel {
            background: rgba(102, 126, 234, 0.1);
            border: 2px solid #667eea;
            border-radius: 15px;
            padding: 20px;
            margin-top: 20px;
            color: white;
        }

        .info-panel h4 {
            color: #667eea;
            margin-bottom: 10px;
        }

        .particle-bg {
            position: absolute;
            width: 4px;
            height: 4px;
            background: rgba(255, 255, 255, 0.3);
            border-radius: 50%;
            animation: float 8s ease-in-out infinite;
        }

        @keyframes float {
            0%, 100% { transform: translateY(0) translateX(0); }
            25% { transform: translateY(-20px) translateX(10px); }
            50% { transform: translateY(-40px) translateX(-10px); }
            75% { transform: translateY(-20px) translateX(15px); }
        }

        .quiz-question {
            background: #f8f9fa;
            padding: 25px;
            border-radius: 15px;
            margin: 20px 0;
            border-left: 5px solid #667eea;
        }

        .quiz-options {
            margin: 15px 0;
        }

        .quiz-option {
            background: white;
            padding: 15px;
            margin: 10px 0;
            border-radius: 10px;
            cursor: pointer;
            border: 2px solid #e0e0e0;
            transition: all 0.3s;
        }

        .quiz-option:hover {
            border-color: #667eea;
            transform: translateX(5px);
        }

        .quiz-option.correct {
            background: #d4edda;
            border-color: #28a745;
        }

        .quiz-option.wrong {
            background: #f8d7da;
            border-color: #dc3545;
        }

        .submit-btn {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            padding: 15px 40px;
            border-radius: 25px;
            cursor: pointer;
            font-size: 18px;
            font-weight: bold;
            margin-top: 20px;
            transition: all 0.3s;
        }

        .submit-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(102, 126, 234, 0.4);
        }

        .result {
            background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
            color: white;
            padding: 20px;
            border-radius: 15px;
            margin-top: 20px;
            text-align: center;
            font-size: 20px;
            display: none;
        }

        ul {
            margin-left: 30px;
            line-height: 2;
        }

        .home-atom-demo {
            width: 250px;
            height: 250px;
            position: relative;
            margin: 30px auto;
        }

        .nucleus {
            width: 50px;
            height: 50px;
            background: #667eea;
            border-radius: 50%;
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: bold;
            font-size: 20px;
            box-shadow: 0 0 30px #667eea;
            animation: nucleusPulse 2s ease-in-out infinite;
        }

        @keyframes nucleusPulse {
            0%, 100% { box-shadow: 0 0 20px #667eea; }
            50% { box-shadow: 0 0 40px #667eea, 0 0 60px #667eea; }
        }

        .orbit {
            position: absolute;
            border: 2px dashed rgba(102, 126, 234, 0.3);
            border-radius: 50%;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
        }

        .orbit1 { width: 100px; height: 100px; }
        .orbit2 { width: 150px; height: 150px; animation: rotate 4s linear infinite; }
        .orbit3 { width: 200px; height: 200px; animation: rotate 6s linear infinite reverse; }

        .electron-home {
            width: 15px;
            height: 15px;
            background: #f5576c;
            border-radius: 50%;
            position: absolute;
            box-shadow: 0 0 15px #f5576c;
            animation: orbitElectron1 3s linear infinite;
        }

        .electron-home:nth-child(2) {
            animation: orbitElectron2 4s linear infinite;
        }

        .electron-home:nth-child(3) {
            animation: orbitElectron3 5s linear infinite;
        }

        @keyframes orbitElectron1 {
            from { 
                transform: rotate(0deg) translateX(50px) rotate(0deg);
            }
            to { 
                transform: rotate(360deg) translateX(50px) rotate(-360deg);
            }
        }

        @keyframes orbitElectron2 {
            from { 
                transform: rotate(120deg) translateX(75px) rotate(-120deg);
            }
            to { 
                transform: rotate(480deg) translateX(75px) rotate(-480deg);
            }
        }

        @keyframes orbitElectron3 {
            from { 
                transform: rotate(240deg) translateX(100px) rotate(-240deg);
            }
            to { 
                transform: rotate(600deg) translateX(100px) rotate(-600deg);
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <nav>
            <button onclick="showPage('home')" class="active">üè† Home</button>
            <button onclick="showPage('tujuan')">üéØ Tujuan</button>
            <button onclick="showPage('materi')">üìö Materi</button>
            <button onclick="showPage('simulasi')">üî¨ Simulasi</button>
            <button onclick="showPage('quiz')">üìù Quiz</button>
        </nav>

        <!-- HOME -->
        <div id="home" class="content active">
            <div class="home-content">
                <h1>Selamat Datang di Pembelajaran Ikatan Kimia</h1>
                <div class="home-atom-demo">
                    <div class="orbit orbit1"></div>
                    <div class="orbit orbit2"></div>
                    <div class="orbit orbit3"></div>
                    <div class="nucleus">Na</div>
                    <div class="electron-home"></div>
                    <div class="electron-home"></div>
                    <div class="electron-home"></div>
                </div>
                <p style="font-size: 1.2em;">Pelajari konsep ikatan kimia dengan cara yang interaktif dan menyenangkan!</p>
                <p>Ikatan kimia adalah gaya tarik-menarik antara atom yang menyebabkan terbentuknya molekul atau senyawa.</p>
                <p>Klik menu di atas untuk mulai belajar!</p>
            </div>
        </div>

        <!-- TUJUAN -->
        <div id="tujuan" class="content">
            <h1>Tujuan Pembelajaran</h1>
            <p>Setelah mempelajari materi ini, siswa diharapkan dapat:</p>
            <ul>
                <li>Memahami konsep dasar ikatan kimia dan mengapa atom membentuk ikatan</li>
                <li>Membedakan jenis-jenis ikatan kimia (ionik, kovalen, dan logam)</li>
                <li>Menjelaskan proses terbentuknya ikatan ionik dan kovalen</li>
                <li>Mengidentifikasi sifat-sifat senyawa berdasarkan jenis ikatannya</li>
                <li>Menggambarkan struktur Lewis dari molekul sederhana</li>
                <li>Menerapkan konsep ikatan kimia dalam kehidupan sehari-hari</li>
            </ul>
            <div class="materi-box">
                <h3>Kompetensi Dasar</h3>
                <p>Menganalisis sifat-sifat senyawa dan mengaitkannya dengan jenis ikatan kimia yang terdapat dalam senyawa tersebut.</p>
            </div>
        </div>

        <!-- MATERI -->
        <div id="materi" class="content">
            <h1>Materi Ikatan Kimia</h1>
            
            <h2>1. Pengertian Ikatan Kimia</h2>
            <div class="materi-box">
                <p>Ikatan kimia adalah gaya tarik-menarik antara atom-atom yang menyebabkan sekumpulan atom dapat membentuk suatu kesatuan yang stabil. Atom-atom bergabung untuk mencapai konfigurasi elektron yang stabil (seperti gas mulia).</p>
            </div>

            <h2>2. Ikatan Ionik</h2>
            <div class="materi-box">
                <h3>Pengertian</h3>
                <p>Ikatan ionik terbentuk akibat perpindahan elektron dari atom yang satu ke atom yang lain, sehingga terbentuk ion positif (kation) dan ion negatif (anion).</p>
                <h3>Contoh</h3>
                <p>NaCl: Natrium (Na) melepas 1 elektron menjadi Na‚Å∫, Klorin (Cl) menerima 1 elektron menjadi Cl‚Åª</p>
                <h3>Sifat Senyawa Ionik</h3>
                <ul>
                    <li>Titik leleh dan titik didih tinggi</li>
                    <li>Keras dan rapuh</li>
                    <li>Dapat menghantarkan listrik dalam bentuk lelehan atau larutan</li>
                    <li>Umumnya larut dalam air</li>
                </ul>
            </div>

            <h2>3. Ikatan Kovalen</h2>
            <div class="materi-box">
                <h3>Pengertian</h3>
                <p>Ikatan kovalen terbentuk akibat pemakaian bersama pasangan elektron oleh dua atom yang berikatan.</p>
                <h3>Jenis Ikatan Kovalen</h3>
                <ul>
                    <li><strong>Kovalen Tunggal:</strong> 1 pasang elektron bersama (H‚ÇÇ, Cl‚ÇÇ)</li>
                    <li><strong>Kovalen Rangkap Dua:</strong> 2 pasang elektron bersama (O‚ÇÇ, CO‚ÇÇ)</li>
                    <li><strong>Kovalen Rangkap Tiga:</strong> 3 pasang elektron bersama (N‚ÇÇ, C‚ÇÇH‚ÇÇ)</li>
                </ul>
                <h3>Sifat Senyawa Kovalen</h3>
                <ul>
                    <li>Titik leleh dan titik didih relatif rendah</li>
                    <li>Umumnya tidak menghantarkan listrik</li>
                    <li>Dapat larut dalam pelarut non-polar</li>
                </ul>
            </div>

            <h2>4. Ikatan Logam</h2>
            <div class="materi-box">
                <h3>Pengertian</h3>
                <p>Ikatan logam adalah ikatan yang terjadi akibat gaya tarik-menarik antara muatan positif ion-ion logam dengan elektron-elektron yang bebas bergerak di sekitarnya.</p>
                <h3>Sifat Logam</h3>
                <ul>
                    <li>Dapat menghantarkan listrik dan panas</li>
                    <li>Dapat ditempa (malleabel) dan direntangkan (duktil)</li>
                    <li>Mengkilap (luster)</li>
                </ul>
            </div>
        </div>

        <!-- SIMULASI -->
        <div id="simulasi" class="content">
            <h1>üî¨ Virtual Lab - Simulasi Ikatan Kimia</h1>
            <p>Pilih simulasi dan saksikan atom bergerak membentuk ikatan!</p>
            
            <div class="simulation-container">
                <div class="sim-card" onclick="startIonicSim()">
                    <h3>‚ö° Ikatan Ionik</h3>
                    <p>Na + Cl ‚Üí NaCl</p>
                    <p>Transfer elektron</p>
                </div>

                <div class="sim-card" onclick="startCovalentSim()">
                    <h3>üîó Ikatan Kovalen</h3>
                    <p>H + H ‚Üí H‚ÇÇ</p>
                    <p>Berbagi elektron</p>
                </div>

                <div class="sim-card" onclick="startWaterSim()">
                    <h3>üíß Molekul Air</h3>
                    <p>2H + O ‚Üí H‚ÇÇO</p>
                    <p>Ikatan polar</p>
                </div>
            </div>

            <div class="virtual-lab" id="virtualLab" style="display: none;">
                <h3 class="lab-title" id="labTitle">Virtual Laboratory</h3>
                <div class="lab-canvas" id="labCanvas"></div>
                <div class="control-panel">
                    <button class="control-btn" onclick="playAnimation()">‚ñ∂Ô∏è Jalankan</button>
                    <button class="control-btn" onclick="resetAnimation()">üîÑ Reset</button>
                    <button class="control-btn" onclick="pauseAnimation()">‚è∏Ô∏è Pause</button>
                </div>
                <div class="info-panel" id="infoPanel">
                    <h4>Informasi Simulasi</h4>
                    <p id="infoText">Pilih simulasi untuk memulai</p>
                </div>
            </div>
        </div>

        <!-- QUIZ -->
        <div id="quiz" class="content">
            <h1>Quiz Ikatan Kimia</h1>
            <p>Uji pemahamanmu tentang ikatan kimia!</p>

            <div class="quiz-question">
                <h3>Soal 1</h3>
                <p>Ikatan yang terbentuk akibat serah terima elektron adalah...</p>
                <div class="quiz-options">
                    <div class="quiz-option" data-question="1" data-answer="a">A. Ikatan Ionik</div>
                    <div class="quiz-option" data-question="1" data-answer="b">B. Ikatan Kovalen</div>
                    <div class="quiz-option" data-question="1" data-answer="c">C. Ikatan Logam</div>
                    <div class="quiz-option" data-question="1" data-answer="d">D. Ikatan Hidrogen</div>
                </div>
            </div>

            <div class="quiz-question">
                <h3>Soal 2</h3>
                <p>Senyawa yang memiliki ikatan kovalen adalah...</p>
                <div class="quiz-options">
                    <div class="quiz-option" data-question="2" data-answer="a">A. NaCl</div>
                    <div class="quiz-option" data-question="2" data-answer="b">B. H‚ÇÇO</div>
                    <div class="quiz-option" data-question="2" data-answer="c">C. CaO</div>
                    <div class="quiz-option" data-question="2" data-answer="d">D. MgCl‚ÇÇ</div>
                </div>
            </div>

            <div class="quiz-question">
                <h3>Soal 3</h3>
                <p>Sifat senyawa ionik adalah...</p>
                <div class="quiz-options">
                    <div class="quiz-option" data-question="3" data-answer="a">A. Titik didih rendah</div>
                    <div class="quiz-option" data-question="3" data-answer="b">B. Tidak dapat menghantarkan listrik dalam bentuk lelehan</div>
                    <div class="quiz-option" data-question="3" data-answer="c">C. Titik leleh tinggi</div>
                    <div class="quiz-option" data-question="3" data-answer="d">D. Lunak dan lentur</div>
                </div>
            </div>

            <div class="quiz-question">
                <h3>Soal 4</h3>
                <p>Molekul N‚ÇÇ memiliki ikatan kovalen...</p>
                <div class="quiz-options">
                    <div class="quiz-option" data-question="4" data-answer="a">A. Tunggal</div>
                    <div class="quiz-option" data-question="4" data-answer="b">B. Rangkap dua</div>
                    <div class="quiz-option" data-question="4" data-answer="c">C. Rangkap tiga</div>
                    <div class="quiz-option" data-question="4" data-answer="d">D. Koordinasi</div>
                </div>
            </div>

            <div class="quiz-question">
                <h3>Soal 5</h3>
                <p>Logam dapat menghantarkan listrik karena...</p>
                <div class="quiz-options">
                    <div class="quiz-option" data-question="5" data-answer="a">A. Memiliki elektron bebas</div>
                    <div class="quiz-option" data-question="5" data-answer="b">B. Dapat larut dalam air</div>
                    <div class="quiz-option" data-question="5" data-answer="c">C. Memiliki ikatan ionik</div>
                    <div class="quiz-option" data-question="5" data-answer="d">D. Memiliki titik leleh rendah</div>
                </div>
            </div>

            <button class="submit-btn" onclick="submitQuiz()">Submit Jawaban</button>
            <div class="result" id="quizResult"></div>
        </div>
    </div>

    <script>
        let currentAnimation = null;
        let animationState = 'stopped';
        let currentSimType = '';

        const answers = {
            1: 'a',
            2: 'b',
            3: 'c',
            4: 'c',
            5: 'a'
        };

        let selectedAnswers = {};

        function showPage(page) {
            const contents = document.querySelectorAll('.content');
            const buttons = document.querySelectorAll('nav button');
            
            contents.forEach(content => content.classList.remove('active'));
            buttons.forEach(button => button.classList.remove('active'));
            
            document.getElementById(page).classList.add('active');
            event.target.classList.add('active');
        }

        // Quiz functions
        document.querySelectorAll('.quiz-option').forEach(option => {
            option.addEventListener('click', function() {
                const question = this.dataset.question;
                const answer = this.dataset.answer;
                
                document.querySelectorAll(`[data-question="${question}"]`).forEach(opt => {
                    opt.style.background = 'white';
                    opt.style.borderColor = '#e0e0e0';
                });
                
                this.style.background = '#e3f2fd';
                this.style.borderColor = '#667eea';
                
                selectedAnswers[question] = answer;
            });
        });

        function submitQuiz() {
            let score = 0;
            const total = Object.keys(answers).length;

            for (let question in answers) {
                const correctAnswer = answers[question];
                const userAnswer = selectedAnswers[question];
                
                document.querySelectorAll(`[data-question="${question}"]`).forEach(option => {
                    option.classList.remove('correct', 'wrong');
                    
                    if (option.dataset.answer === correctAnswer) {
                        option.classList.add('correct');
                    }
                    
                    if (option.dataset.answer === userAnswer && userAnswer !== correctAnswer) {
                        option.classList.add('wrong');
                    }
                });

                if (userAnswer === correctAnswer) {
                    score++;
                }
            }

            const percentage = (score / total) * 100;
            const resultDiv = document.getElementById('quizResult');
            resultDiv.style.display = 'block';
            resultDiv.innerHTML = `
                <h2>Hasil Quiz</h2>
                <p>Skor Anda: ${score} dari ${total} (${percentage}%)</p>
                <p>${percentage >= 80 ? 'üéâ Luar biasa!' : percentage >= 60 ? 'üëç Bagus!' : 'üí™ Terus belajar!'}</p>
            `;
            
            resultDiv.scrollIntoView({ behavior: 'smooth' });
        }

        // Simulation functions
        function createParticles() {
            const canvas = document.getElementById('labCanvas');
            for (let i = 0; i < 15; i++) {
                const particle = document.createElement('div');
                particle.className = 'particle-bg';
                particle.style.left = Math.random() * 100 + '%';
                particle.style.top = Math.random() * 100 + '%';
                particle.style.animationDelay = Math.random() * 8 + 's';
                canvas.appendChild(particle);
            }
        }

        function clearCanvas() {
            const canvas = document.getElementById('labCanvas');
            canvas.innerHTML = '';
            createParticles();
        }

        function createAtom(symbol, color, x, y, size = 80) {
            const atom = document.createElement('div');
            atom.className = 'atom-virtual';
            atom.style.width = size + 'px';
            atom.style.height = size + 'px';
            atom.style.background = color;
            atom.style.left = x + 'px';
            atom.style.top = y + 'px';
            atom.textContent = symbol;
            return atom;
        }

        function createElectronShell(atom, radius, electronCount) {
            const shell = document.createElement('div');
            shell.className = 'electron-shell';
            shell.style.width = radius * 2 + 'px';
            shell.style.height = radius * 2 + 'px';
            shell.style.left = (parseInt(atom.style.left) + 40 - radius) + 'px';
            shell.style.top = (parseInt(atom.style.top) + 40 - radius) + 'px';
            
            for (let i = 0; i < electronCount; i++) {
                const electron = document.createElement('div');
                electron.className = 'electron-dot';
                const angle = (360 / electronCount) * i;
                const rad = (angle * Math.PI) / 180;
                electron.style.left = (radius + radius * Math.cos(rad) - 6) + 'px';
                electron.style.top = (radius + radius * Math.sin(rad) - 6) + 'px';
                shell.appendChild(electron);
            }
            
            return shell;
        }

        function createBond(x1, y1, x2, y2) {
            const bond = document.createElement('div');
            bond.className = 'bond-line';
            const dx = x2 - x1;
            const dy = y2 - y1;
            const length = Math.sqrt(dx * dx + dy * dy);
            const angle = Math.atan2(dy, dx) * 180 / Math.PI;
            
            bond.style.width = length + 'px';
            bond.style.left = x1 + 'px';
            bond.style.top = y1 + 'px';
            bond.style.transform = `rotate(${angle}deg)`;
            
            return bond;
        }

        function startIonicSim() {
            currentSimType = 'ionic';
            document.getElementById('virtualLab').style.display = 'block';
            document.getElementById('labTitle').textContent = '‚ö° Simulasi Ikatan Ionik: Na + Cl ‚Üí NaCl';
            document.getElementById('infoText').innerHTML = `
                <strong>Tahap 1:</strong> Atom Na dan Cl terpisah<br>
                <strong>Tahap 2:</strong> Na melepas elektron (menjadi Na‚Å∫)<br>
                <strong>Tahap 3:</strong> Cl menerima elektron (menjadi Cl‚Åª)<br>
                <strong>Tahap 4:</strong> Terbentuk ikatan ionik (gaya elektrostatik)
            `;
            resetAnimation();
            document.getElementById('virtualLab').scrollIntoView({ behavior: 'smooth' });
        }

        function startCovalentSim() {
            currentSimType = 'covalent';
            document.getElementById('virtualLab').style.display = 'block';
            document.getElementById('labTitle').textContent = 'üîó Simulasi Ikatan Kovalen: H + H ‚Üí H‚ÇÇ';
            document.getElementById('infoText').innerHTML = `
                <strong>Tahap 1:</strong> Dua atom H terpisah<br>
                <strong>Tahap 2:</strong> Atom H bergerak mendekat<br>
                <strong>Tahap 3:</strong> Elektron mulai tumpang tindih<br>
                <strong>Tahap 4:</strong> Terbentuk ikatan kovalen (berbagi elektron)
            `;
            resetAnimation();
            document.getElementById('virtualLab').scrollIntoView({ behavior: 'smooth' });
        }

        function startWaterSim() {
            currentSimType = 'water';
            document.getElementById('virtualLab').style.display = 'block';
            document.getElementById('labTitle').textContent = 'üíß Simulasi Molekul Air: 2H + O ‚Üí H‚ÇÇO';
            document.getElementById('infoText').innerHTML = `
                <strong>Tahap 1:</strong> 2 atom H dan 1 atom O terpisah<br>
                <strong>Tahap 2:</strong> Atom H mendekat ke O<br>
                <strong>Tahap 3:</strong> Terbentuk 2 ikatan kovalen<br>
                <strong>Tahap 4:</strong> Molekul H‚ÇÇO terbentuk (sudut 104.5¬∞)
            `;
            resetAnimation();
            document.getElementById('virtualLab').scrollIntoView({ behavior: 'smooth' });
        }

        function resetAnimation() {
            if (currentAnimation) {
                clearInterval(currentAnimation);
            }
            animationState = 'stopped';
            clearCanvas();
            
            const canvas = document.getElementById('labCanvas');
            
            if (currentSimType === 'ionic') {
                const na = createAtom('Na', '#ff6b6b', 100, 180);
                const cl = createAtom('Cl', '#4ecdc4', 500, 180);
                const naShell = createElectronShell(na, 60, 1);
                const clShell = createElectronShell(cl, 60, 7);
                
                canvas.appendChild(na);
                canvas.appendChild(cl);
                canvas.appendChild(naShell);
                canvas.appendChild(clShell);
                
            } else if (currentSimType === 'covalent') {
                const h1 = createAtom('H', '#ffe66d', 100, 180, 70);
                const h2 = createAtom('H', '#ffe66d', 500, 180, 70);
                const h1Shell = createElectronShell(h1, 50, 1);
                const h2Shell = createElectronShell(h2, 50, 1);
                
                canvas.appendChild(h1);
                canvas.appendChild(h2);
                canvas.appendChild(h1Shell);
                canvas.appendChild(h2Shell);
                
            } else if (currentSimType === 'water') {
                const o = createAtom('O', '#ff6b9d', 300, 180);
                const h1 = createAtom('H', '#ffe66d', 100, 100, 60);
                const h2 = createAtom('H', '#ffe66d', 100, 280, 60);
                const oShell = createElectronShell(o, 60, 6);
                const h1Shell = createElectronShell(h1, 45, 1);
                const h2Shell = createElectronShell(h2, 45, 1);
                
                canvas.appendChild(o);
                canvas.appendChild(h1);
                canvas.appendChild(h2);
                canvas.appendChild(oShell);
                canvas.appendChild(h1Shell);
                canvas.appendChild(h2Shell);
            }
        }

        function playAnimation() {
            if (animationState === 'playing') return;
            animationState = 'playing';
            
            const canvas = document.getElementById('labCanvas');
            let step = 0;
            
            currentAnimation = setInterval(() => {
                step++;
                
                if (currentSimType === 'ionic') {
                    animateIonic(step, canvas);
                } else if (currentSimType === 'covalent') {
                    animateCovalent(step, canvas);
                } else if (currentSimType === 'water') {
                    animateWater(step, canvas);
                }
                
                if (step >= 100) {
                    clearInterval(currentAnimation);
                    animationState = 'stopped';
                }
            }, 50);
        }

        function animateIonic(step, canvas) {
            const atoms = canvas.querySelectorAll('.atom-virtual');
            const shells = canvas.querySelectorAll('.electron-shell');
            const na = atoms[0];
            const cl = atoms[1];
            
            if (step < 30) {
                // Fase 1: Mendekat
                na.style.left = (100 + step * 3) + 'px';
                cl.style.left = (500 - step * 3) + 'px';
                shells[0].style.left = (60 + step * 3) + 'px';
                shells[1].style.left = (460 - step * 3) + 'px';
            } else if (step < 50) {
                // Fase 2: Transfer elektron
                na.classList.add('combining');
                cl.classList.add('combining');
                if (step === 40) {
                    na.textContent = 'Na‚Å∫';
                    cl.textContent = 'Cl‚Åª';
                }
            } else if (step < 70) {
                // Fase 3: Membentuk ikatan
                const bond = createBond(
                    190 + (step - 50) * 0.5,
                    220,
                    410 - (step - 50) * 0.5,
                    220
                );
                bond.classList.add('active');
                if (canvas.querySelectorAll('.bond-line').length === 0) {
                    canvas.appendChild(bond);
                }
            }
        }

        function animateCovalent(step, canvas) {
            const atoms = canvas.querySelectorAll('.atom-virtual');
            const shells = canvas.querySelectorAll('.electron-shell');
            const h1 = atoms[0];
            const h2 = atoms[1];
            
            if (step < 40) {
                // Fase 1: Mendekat
                h1.style.left = (100 + step * 4) + 'px';
                h2.style.left = (500 - step * 4) + 'px';
                shells[0].style.left = (75 + step * 4) + 'px';
                shells[1].style.left = (475 - step * 4) + 'px';
            } else if (step < 60) {
                // Fase 2: Tumpang tindih elektron
                h1.classList.add('combining');
                h2.classList.add('combining');
            } else if (step < 80) {
                // Fase 3: Ikatan kovalen terbentuk
                const bond = createBond(
                    260 + (step - 60),
                    215,
                    340 - (step - 60),
                    215
                );
                bond.classList.add('active');
                if (canvas.querySelectorAll('.bond-line').length === 0) {
                    canvas.appendChild(bond);
                }
            }
        }

        function animateWater(step, canvas) {
            const atoms = canvas.querySelectorAll('.atom-virtual');
            const shells = canvas.querySelectorAll('.electron-shell');
            const o = atoms[0];
            const h1 = atoms[1];
            const h2 = atoms[2];
            
            if (step < 40) {
                // Fase 1: H mendekat ke O
                h1.style.left = (100 + step * 3) + 'px';
                h1.style.top = (100 + step * 1.5) + 'px';
                h2.style.left = (100 + step * 3) + 'px';
                h2.style.top = (280 - step * 1.5) + 'px';
                shells[1].style.left = (78 + step * 3) + 'px';
                shells[1].style.top = (78 + step * 1.5) + 'px';
                shells[2].style.left = (78 + step * 3) + 'px';
                shells[2].style.top = (258 - step * 1.5) + 'px';
            } else if (step < 60) {
                // Fase 2: Ikatan terbentuk
                h1.classList.add('combining');
                h2.classList.add('combining');
                o.classList.add('combining');
            } else if (step < 80) {
                // Fase 3: Molekul H2O
                const bond1 = createBond(270, 200, 230, 160);
                const bond2 = createBond(270, 240, 230, 280);
                bond1.classList.add('active');
                bond2.classList.add('active');
                if (canvas.querySelectorAll('.bond-line').length === 0) {
                    canvas.appendChild(bond1);
                    canvas.appendChild(bond2);
                }
            }
        }

        function pauseAnimation() {
            if (currentAnimation) {
                clearInterval(currentAnimation);
                animationState = 'paused';
            }
        }
    </script>
</body>
</html>